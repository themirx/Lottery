{% extends "base.html" %}
{% block content %}
<div class="grid-layout">
  <section class="card">
    <div class="card__header">
      <h2>Create a draw</h2>
      <p class="muted">Enter names, pick winners, and run a fair lottery.</p>
    </div>
    <form method="post" class="form">
      <label>
        Participants
        <textarea
          name="participants"
          rows="8"
          placeholder="One name per line or comma separated"
        >{{ participants_text }}</textarea>
        <span class="hint">Duplicates are automatically removed to keep odds equal.</span>
      </label>
      <label>
        Number of winners
        <input
          type="number"
          name="winners"
          min="1"
          value="{{ winners_count }}"
          required
        />
      </label>
      <button class="primary" type="submit">Run lottery</button>
    </form>
  </section>

  <section class="card">
    <div class="card__header">
      <h2>Results</h2>
      <p class="muted">Secure randomness, no duplicate winners.</p>
    </div>

    {% if result %}
    <div class="results">
      <div class="stat">
        <span class="stat__label">Participants</span>
        <span class="stat__value">{{ result.participants | length }}</span>
      </div>
      <div class="stat">
        <span class="stat__label">Requested winners</span>
        <span class="stat__value">{{ result.requested_winners }}</span>
      </div>
    </div>

    <ul class="winner-list">
      {% for winner in result.winners %}
      <li>{{ winner }}</li>
      {% endfor %}
    </ul>

    <details class="participants">
      <summary>View all participants</summary>
      <div class="pillbox">
        {% for participant in result.participants %}
        <span class="pill">{{ participant }}</span>
        {% endfor %}
      </div>
    </details>
    {% else %}
    <div class="empty">
      <p class="muted">No draw yet. Your winners will appear here.</p>
    </div>
    {% endif %}
  </section>
</div>
{% endblock %}
